<!--StartFragment-->

å°±åœ¨Â 2023.3.7Â æ—¥ï¼Œç”± 10Â K Universe æå‡ºçš„ä»¥å¤ªåŠæ”¹è¿›æè®® EIP-6147 å·²ç§»è‡³æœ€ç»ˆç‰ˆæœ¬ï¼ˆFinalï¼‰ï¼

è¯¥æ ‡å‡†æ˜¯ ERC-721 çš„æ‰©å±•ï¼Œåˆ†ç¦»äº†Â NFTÂ å’ŒÂ SBTÂ çš„æŒæœ‰æƒå’Œè½¬è®©æƒï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªæ–°çš„å¯è®¾ç½®åˆ°æœŸæ—¶é—´çš„"å®ˆå«è€…"è§’è‰²Â Guardï¼Œå¯**ä½¿å¾— NFT é˜²ç›—ã€å€Ÿè´·ã€ç§Ÿèµã€SBT ç­‰æ›´å…·çµæ´»**ã€‚

æœ¬æ–‡å°†ç³»ç»Ÿè®²è¿°Â ERC-6147Â çš„å®ç°æœºåˆ¶ï¼Œå¹¶å¯¹æ¯”å¾€æœŸÂ NFTÂ ç§Ÿèµåè®®ä¸“æ¡ˆÂ ERC-4907ã€ERC-5055Â ï¼Œæ¥ç»¼åˆåˆ†æç‚¹è¯„æ­¤åè®®ä»¥åŠé€‚åˆçš„åº”ç”¨åœºæ™¯ï¼


![Untitled (5).png](https://img.learnblockchain.cn/attachments/2023/03/NSZa8UMN64086840214c8.png)

## 1ã€èƒŒæ™¯

NFTÂ å·²ç»å¯è°“æ˜¯ä¸ªè€ç”Ÿå¸¸è°ˆçš„è¯é¢˜äº†ï¼Œå€ŸåŠ©é“¾ä¸Šçš„ä¸å¯ç¯¡æ”¹ç‰¹æ€§ä»¥åŠåˆçº¦æœ¬èº«çš„è‡ªåŠ¨åŒ–è¿ä½œï¼Œå®ç°äº†é“¾ä¸Šèµ„äº§çš„ç¡®æƒä¸ç®¡ç†ï¼Œç¬”è€…ä¹Ÿä»æ ‡å‡†åè®®ï¼Œç§Ÿèµæ‹“å±•åè®®ï¼Œä¹ƒè‡³äºÂ NFTÂ äº¤æ˜“å¸‚åœºçš„å‡ ç§ä¸»æµæ¨¡å¼æ¥æ’°å†™è¿‡å¤šç¯‡æ–‡ç« é•¿æ–‡ã€‚

å¦‚æœè¦è®ºè¯Â NFTÂ çš„ä¼˜åŠ¿å¯èƒ½å¯ä»¥ç½—åˆ—ä¸Šå‡ é¡µçº¸ï¼Œä½†è¦è®ºè¯Â NFTÂ çš„åŠ£åŠ¿ï¼Œåˆ™åƒè¨€ä¸‡è¯­æ±‡èšæˆä¸€ä¸ªè¯ï¼šæµåŠ¨æ€§ï¼

å½“ç„¶å„ä½å¯èƒ½è¦**è´¨ç–‘çš„æ˜¯ï¼ŒæµåŠ¨æ€§ä¸è¶³çš„å›°å¢ƒä¸å®ç°äº§æƒåˆ†ç¦»æ ‡å‡†æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ**

åœ¨ç¬”è€…çœ‹æ¥ï¼Œäº‹å®ä¸ŠÂ NFTÂ æµåŠ¨æ€§çš„å›°å¢ƒæ›´å¤šä¸æ˜¯æºäºÂ NFTÂ åè®®æœ¬èº«ï¼Œå¯¹Â IDÂ çš„éåŒè´¨åŒ–æœºåˆ¶å’Œé™å®šÂ IDÂ åŒºé—´å¯¼è‡´çš„ï¼Œå“ªæ€•æ˜¯è¿‘ä¹æ— ç©·çš„Â ERCÂ 20Â tokenÂ éš¾é“å°±ä¸ç¼ºä¹æµåŠ¨æ€§äº†å—ï¼Ÿæ›´é‡è¦çš„æ˜¯ï¼ŒæµåŠ¨æ€§æœ¬èº«æ˜¯å‡ºäºå¯¹é‡‘èäº§å“çš„å®šä»·è¯‰æ±‚è€Œäº§ç”Ÿçš„è¯é¢˜ï¼Œå¦‚ä½•è®©Â NFTÂ æœ¬èº«å…·æœ‰ä½¿ç”¨ä»·å€¼ï¼Œä¾¿æˆäº†è®©ä»·å€¼æœ‰æ‰€ä¾å½’è€Œä¸æ˜¯åªä¾èµ–äºå¸‚åœºæ“ä½œçš„åè®®ã€‚

å½±å“ä½¿ç”¨ä»·å€¼Â NFTÂ ä½¿ç”¨ä»·å€¼çš„ï¼Œä¹Ÿæ­£æ˜¯Â NFTÂ åè®®æœ¬èº«

### 1.1ã€äº§æƒè€¦åˆï¼Œé«˜ä»·å€¼Â NFTÂ ä¼šå€¾å‘äºå®‰å…¨é¿é™©

ç›®å‰Â NFTÂ è¢«ç›—çš„æ¡ˆä¾‹å¾ˆå¤šï¼Œç„¶è€Œç°æœ‰çš„Â NFTÂ é˜²ç›—æ–¹æ¡ˆï¼Œæ¯”å¦‚å°†Â NFTÂ è½¬å…¥å†·é’±åŒ…ç­‰éƒ½ä¼šä½¿å¾—Â NFTÂ çš„ä½¿ç”¨ä¸ä¾¿ã€‚

å¹¶ä¸”åœ¨ç›®å‰çš„Â NFTÂ å€Ÿè´·ä¸­ï¼ŒNFTÂ æ‰€æœ‰è€…éœ€è¦å°†Â NFTÂ è½¬ç§»åˆ°Â NFTÂ å€Ÿè´·åˆçº¦ä¸­ï¼ŒNFTÂ æ‰€æœ‰è€…åœ¨è·å¾—å€Ÿè´·æœŸé—´ä¸å†æ‹¥æœ‰Â NFTÂ çš„ä½¿ç”¨æƒï¼Œè¿™è¾¹æ˜¯äº§æƒè€¦åˆçš„é—®é¢˜ï¼Œè¿™å…¶å®å’Œæˆ‘ä»¬ç°å®ä¸­è´­ä¹°æˆ¿äº§å†æˆ¿äº§æŠµæŠ¼æ¢å–æµåŠ¨æ€§èµ„é‡‘æ—¶ï¼Œå†éé£é™©æ¡ä»¶ä¸‹æ˜¯ä¸ç”¨è¢«å ç”¨æˆ¿å±‹ä½¿ç”¨æƒçš„æƒ…å†µå¾ˆä¸åŒã€‚

è®°å¿†å°¤æ–°çš„æ˜¯ï¼ŒçŒ´å­Â APEÂ ç©ºæŠ•æ—¶è¢«æ”»å‡»è€…ç”¨é—ªç”µè´·ç»“åˆÂ NFTXÂ è¿›è¡Œæ”»å‡»




![Untitled (1).png](https://img.learnblockchain.cn/attachments/2023/03/xKpmpSQ7640868335e4c6.png)



åŸäº‹ä»¶åˆ†æå¯æ‹“å±•é˜…è¯»ï¼š[EIP-5058 èƒ½å¦é˜²æ­¢Â NFTÂ é¡¹ç›®æ–¹ææ¡¶è·‘è·¯ï¼Ÿ](http://mp.weixin.qq.com/s?\__biz=MzIyMTQ5MTg5Mw==\&mid=2247483797\&idx=1\&sn=8bdd641eb4316baad1e91fb0e815c613\&chksm=e83aa64fdf4d2f59e8f76f5dd54c1c287b230a2201fd80e9d21b8752fdd53c02494beff533ef\&scene=21#wechat_redirect)

æ•´ä»¶äº‹æƒ…é‡Œï¼Œå”¯ä¸€å—æŸçš„åˆ™æ˜¯è´¨æŠ¼äº†çŒ´å­çš„ç”¨æˆ·ï¼Œæœ¬æ¥æ˜¯èµšå–å¾®ä¸è¶³é“çš„æ—¶é—´åˆ©å·®å´ç—›å¤±äº†Â apeÂ çš„æµ·é‡ç©ºæŠ•ã€‚

åŒæ ·çš„ï¼Œäº§æƒè€¦åˆçš„è¿˜æœ‰Â SBTÂ çš„é—®é¢˜

å¯¹äºÂ SBTï¼Œç›®å‰ä¸»æµè§‚ç‚¹è®¤ä¸ºÂ SBTÂ æ˜¯ä¸å¯è½¬è®©çš„ï¼Œè¿™ä½¿å¾—Â SBTÂ ä¸ä»¥å¤ªåœ°å€ç»‘å®šã€‚ä½†æ˜¯ï¼Œå½“ç”¨æˆ·åœ°å€çš„ç§é’¥æ³„éœ²æˆ–ä¸¢å¤±æ—¶ï¼Œæ‰¾å›Â SBTÂ å°†æˆä¸ºä¸€é¡¹å¤æ‚çš„å·¥ä½œï¼Œå¹¶ä¸”æ²¡æœ‰ç›¸åº”çš„æ ‡å‡†ã€‚SBTÂ æœ¬è´¨ä¸Šå®ç°äº†Â NFTÂ æŒæœ‰æƒå’Œè½¬è®©æƒçš„åˆ†ç¦»ã€‚å½“Â SBTÂ æ‰€åœ¨çš„é’±åŒ…è¢«ç›—æˆ–ä¸å¯ç”¨æ—¶ï¼ŒSBTÂ åº”è¯¥æ˜¯å¯ä»¥æ¢å¤çš„ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœä¸€æ‰€å¤§å­¦å‘å…¶æ¯•ä¸šç”Ÿé¢å‘åŸºäºæ–‡å‡­çš„Â SBTï¼Œå¦‚æœå¤§å­¦åæ¥å‘ç°æ¯•ä¸šç”Ÿæœ‰å­¦æœ¯ä¸ç«¯è¡Œä¸ºæˆ–æŸå®³å¤§å­¦å£°èª‰ï¼Œå®ƒåº”è¯¥æœ‰èƒ½åŠ›æ”¶å›æ­¤æ–‡å‡­çš„Â SBTã€‚

### 1.2ã€äº§æƒåˆ†ç¦»åˆ†æ¡ˆï¼Œå¼ºåˆ¶æ€§ç»´åº¦éš¾ä»¥æŠŠæ§

è¿‡å¾€åå››ä¹Ÿè§£è¯»è¿‡è‹¥å¹²å°è¯•äº§æƒåˆ†ç¦»çš„æ–¹æ¡ˆï¼Œä¾‹å¦‚Â ERC-4907Â å’ŒÂ ERC-5058Â ï¼Œä¸å¯é¿å…çš„æœ€å¤§çš„éš¾é¢˜åœ¨äºå¼ºåˆ¶æ€§ç¨‹åº¦çš„è¡¡é‡ï¼Œè¿™å¹¶ä¸æ˜¯æ–¹æ¡ˆæœ¬èº«çš„é—®é¢˜ï¼Œè€Œæ˜¯æ–¹æ¡ˆæœ¬èº«çš„å“²å­¦ç†å¿µé—®é¢˜ã€‚

**1.2.1ã€ç®€å•å“²å­¦Â ERC-4907Â ï¼Œå®šä¹‰æ„¿æ™¯å‰©ä¸‹äº¤ç»™å…±è¯†**

åœ¨Â 2022-07Â æœˆï¼ŒNFT ç§Ÿèµå¸‚åœº Double Protocol æäº¤çš„å¯ç§Ÿèµ NFT æ ‡å‡†â€œEIP-4907Â â€é€šè¿‡äº†ä»¥å¤ªåŠå¼€å‘å›¢é˜Ÿçš„æœ€ç»ˆå®¡æ ¸ï¼Œæˆä¸ºç¬¬ 30 ä¸ª ERC æ ‡å‡†â€œFinalâ€çš„çŠ¶æ€ã€‚

ä»£ç æä¸ºç®€å•ä»…æœ‰Â 72Â è¡Œï¼Œä½¿ç”¨è¿™ä¸ªæ ‡å‡†ï¼Œå°±æ˜¯åœ¨åŸæ¥çš„Â ERCÂ 721Â ä¹‹ä¸Šæ–°å¢

* 1Â ä¸ªäº‹ä»¶ï¼ˆç”¨äºé€šçŸ¥é“¾ä¸‹åº”ç”¨ç§°ä¸ºäº‹ä»¶ï¼‰
* 3Â ä¸ªæ–¹æ³•ï¼ˆç”¨äºå®ç°é“¾ä¸Šæ•°æ®ç®¡ç†åŠŸèƒ½ï¼‰


```

struct UserInfo     {
        address user;// ç”¨æˆ·åœ°å€
        uint64 expires;//ç”¨æˆ·åˆ°æœŸæ—¶é—´
}

```

å½’å’åŸç†ï¼Œå…¶å®Â 4907Â åªæ˜¯æ–°å¢äº†ä¸€ä¸ªæ•°æ®å¯¹è±¡Â UserInfoÂ åœ¨æ‰€æœ‰æƒçš„æ¦‚å¿µä¹‹å¤–å¢åŠ â€œç”¨æˆ·â€çš„ç»´åº¦ï¼Œä½†æ˜¯æ¯•ç«Ÿå…¶å¼ºåˆ¶æ€§æœ‰é™ï¼Œåªè¦è½¬ç§»å°±èƒ½å¼ºè¡Œç»ˆæ­¢å‡ºç§Ÿæˆæƒ

è¯¦æƒ…å¯æ‹“å±•é˜…è¯»ï¼š



* 721Â ç§Ÿèµåè®®è§£è¯»ï¼š[ä»¥å¤ªåŠæ–°æ ‡å‡†Â EIP-4907Â æ˜¯æ€æ ·å®ç°Â NFTÂ ç§Ÿèµçš„ï¼Ÿ](http://mp.weixin.qq.com/s?\__biz=MzIyMTQ5MTg5Mw==\&mid=2247483830\&idx=1\&sn=9f0002c75b0168b44cba7331a0f115e0\&chksm=e83aa66cdf4d2f7af04313b44143f23b1874b851a079cd793f6837346279d26cbf035602b33e\&scene=21#wechat_redirect)
* 1155Â ç§Ÿèµåè®®è§£è¯»ï¼š[NFTÂ ç§Ÿèµææ¡ˆÂ EIP-5006Â æ­¥å…¥æœ€åå®¡æ ¸ï¼](http://mp.weixin.qq.com/s?\__biz=MzIyMTQ5MTg5Mw==\&mid=2247483863\&idx=1\&sn=5c8c4d3b28f806b4140a59b9baa2b944\&chksm=e83aa60ddf4d2f1b25ebe94cdc2c99ca5704bdf1edef580a894129994fe3aac395cc2d6ec03a\&scene=21#wechat_redirect)




**1.2.2ã€Â 0Â ä¿¡ä»»å“²å­¦çš„Â ERC-5058Â ï¼Œä»£ç å³æ³•å¾‹**

ä»–æœ¬è´¨ä¸Šæ˜¯å¯¹Â NFTÂ çš„é”å®šçŠ¶æ€è¿›è¡Œç®¡ç†ï¼Œè®©é¡¹ç›®æ–¹åœ¨ç»§æ‰¿Â 5058Â å®ç°çš„Â NFTÂ é¡¹ç›®ä¸­ï¼Œæä¾›é”å®šå³è½¬ç§»çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥åœ¨ç»§æ‰¿ä¸­å®ç°æ›´å¤šåŠŸèƒ½æ¯”å¦‚ç‰ˆç¨ç­‰

ä»–å°è£…æä¾›äº†è‹¥å¹²æä¾›æ–¹æ³•ï¼šåªæœ‰ç”¨æˆ·è®¸å¯ä»¥åŠé¡¹ç›®æ–¹æ‰§è¡Œä¹‹åæ‰ä¼šå®Œå…¨é”å®š

ç”¨æˆ·å¯è°ƒç”¨



* lockApproveï¼ˆè®¸å¯é”å®šå•ä¸ªÂ NFTï¼‰
* setLockApprovalForAllï¼ˆè®¸å¯é”å®šè¯¥åœ°å€ä¸‹å…¨éƒ¨Â NFTï¼‰



é¡¹ç›®æ–¹åˆçº¦è°ƒç”¨ï¼š




* lockFromï¼ˆé”å®šç”¨æˆ·çš„Â NFTï¼‰
* unlockFromï¼ˆè§£é”ç”¨æˆ·çš„Â NFTï¼‰




é”å®šæœŸçš„å®šä¹‰ä¹Ÿæå…·å¼ºåˆ¶æ€§ï¼Œè¿‘ä¹åªä¾æ®è®¾å®šä¹‹åˆçš„æ—¶é—´ç‚¹

é¡¹ç›®æ–¹ï¼ˆç¬¬ä¸‰æ–¹ï¼‰é”å®š NFT æ—¶ï¼Œéœ€è¦æŒ‡å®šé”å®šè¿‡æœŸçš„åŒºå—é«˜åº¦ï¼Œè¯¥é«˜åº¦å¿…é¡»å¤§äºå½“å‰åŒºå—é«˜åº¦ã€‚é”åˆ°æœŸåï¼ŒNFT è‡ªåŠ¨é‡Šæ”¾ï¼Œæ‰å¯ä»¥è¿›è¡Œè½¬ç§»ã€‚

é¡¹ç›®ç›®å‰è¿˜æ˜¯å¤„äºè‰ç¨¿é˜¶æ®µï¼Œæˆ–è®¸å¼ºåˆ¶æ€§è¿‡é«˜ä»¥åŠç”¨æˆ·é¡¹ç›®æ–¹åŒå‘æ“ä½œçš„è¾ƒé«˜æˆæœ¬æ‰€è‡´

è¯¦æƒ…å¯æ‹“å±•é˜…è¯»ï¼š[EIP-5058 èƒ½å¦é˜²æ­¢Â NFTÂ é¡¹ç›®æ–¹ææ¡¶è·‘è·¯ï¼Ÿ](http://mp.weixin.qq.com/s?\__biz=MzIyMTQ5MTg5Mw==\&mid=2247483797\&idx=1\&sn=8bdd641eb4316baad1e91fb0e815c613\&chksm=e83aa64fdf4d2f59e8f76f5dd54c1c287b230a2201fd80e9d21b8752fdd53c02494beff533ef\&scene=21#wechat_redirect)

è®²è¿°å®Œä¸Šè¿°å®Œå…¨ä¸å¼ºåˆ¶Â 4907Â ï¼Œä»¥åŠå®Œå…¨å¼ºåˆ¶çš„Â 5058Â ï¼Œä¾¿åˆ°äº†æœ¬æ–‡ä¸»é¢˜ï¼šæœ€æ–°é€šè¿‡ä»¥å¤ªåŠåŸºé‡‘ä¼šå®¡æŸ¥ï¼Œç¡®å®šä¸ºÂ FinalÂ çš„Â ERC-6147Â ï¼Œè™½ç„¶ä»–åŸç”Ÿçš„æ ‡é¢˜æ˜¯ï¼šã€ŠGuard of NFT/SBT, an Extension of ERC-721 ã€‹ï¼Œä½†åå››å›ä»ç³»åˆ—çš„ç§Ÿèµç ”ç©¶ç»éªŒæ¥çœ‹ï¼Œä»–æ›´åº”è¯¥ç§°æ˜¯ã€ŠåŠå¼ºåˆ¶çš„Â NFTÂ äº§æƒåˆ†ç¦»æ ‡å‡†ã€‹

## 2ã€ERC-6147Â çš„è¿ä½œæœºåˆ¶

æ­¤åè®®æ•´ä½“ä»£ç ä¹Ÿéå¸¸ç²¾ç®€ä¸”é«˜åº¦å¤ç”¨ï¼Œå±äºå¯¹Â ERCÂ 721Â çš„æ‹“å±•æ ‡å‡†ï¼Œä½†æ˜¯è¦æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨äº†ä»–ï¼Œåˆ™è½¬ç§»çš„æ“ä½œå¯èƒ½ä¸å¸¸è§„çš„Â 721Â çš„é€»è¾‘ä¸åŒï¼Œæ“ä½œä¸å½“å¯èƒ½å®¹æ˜“è¢«é’“é±¼ï¼Œå…·ä½“å¦‚ä½•å’±ä»¬å±•å¼€è¯´è¯´ã€‚

å»ºè®®æ‹“å±•é˜…è¯»ï¼š[ã€æºç è§£è¯»ã€‘ä½ ä¹°çš„Â NFTÂ åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ](http://mp.weixin.qq.com/s?\__biz=MzIyMTQ5MTg5Mw==\&mid=2247483815\&idx=1\&sn=5f91df631b450944739419be185e597c\&chksm=e83aa67ddf4d2f6bf24b9f6139bd685db9b5f3ff5a131f84c179a5166ad42337f0b2aabe0bf0\&scene=21#wechat_redirect)

### 2.1ã€GuardÂ æ˜¯ä»€ä¹ˆï¼Ÿè°èƒ½æ§åˆ¶ï¼Ÿ

é¦–å…ˆÂ ERC-6147Â å®šä¹‰äº†ä¸€ä¸ªåä¸ºÂ Guardï¼ˆå®ˆå«è€…ï¼‰çš„è§’è‰²ï¼Œå’ŒÂ 4907Â çš„Â UserInfoÂ å¾ˆç›¸ä¼¼ï¼Œ


```

struct GuardInfo{
        address guard;  // å®ˆå«è€…åœ°å€ï¼Œ
        uint64 expires; // åˆ°æœŸæ—¶é—´ï¼Œ
}
```


è€ŒÂ GuardÂ åªæœ‰è¯¥Â NFTÂ çš„å½“å‰æ‰€æœ‰è€…åœ°å€ä»¥åŠæœ‰ä»£æ‰£æƒé™çš„åœ°å€ï¼Œå¯ä»¥é€šè¿‡changeGuardè®¾ç½®ï¼Œ

é€šè¿‡æºç å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è®¾ç½®Â GuardÂ çš„æ—¶å€™è‹¥å¹²çš„ç»†èŠ‚// é˜²æ­¢è¯¯é”å®šï¼Œæ‰€ä»¥Â GuardÂ ä¸èƒ½è®¾ç½®ä¸ºÂ 0Â åœ°å€


```
require(newGuard != address(0), "ERC6147: new guard can not be null"); 

// åªæœ‰Guardå¯ä»¥ä¿®æ”¹è‡ªå·±
require(guard == _msgSender(), "ERC6147: only guard can change it self");

// åªæœ‰nftçš„æ‰€æœ‰è€…æˆ–è€…è·å¾—æˆæƒè€…å¯ä»¥è®¾ç½®Guard
require(_isApprovedOrOwner(_msgSender(), tokenId), "ERC6147: caller is not owner nor approved");
```

è®¾ç½®æˆåŠŸåï¼Œä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡Â guardInfo æ–¹æ³•æ¥æŸ¥è¯¢æŸä¸ªÂ NFTIDï¼Œå½“å‰çš„Â GuardÂ ä¿¡æ¯ï¼ŒåŒæ—¶è¿™é‡Œä¹Ÿæ²¿ç”¨äº†å’ŒÂ 4907Â ä¸€æ ·çš„åŸºäºæ—¶é—´æˆ³çš„è®¾è®¡ï¼Œæ‰€ä»¥æ˜¯åˆ°æœŸæ— éœ€äºŒæ¬¡ä¸Šé“¾äº¤æ˜“ï¼Œå°±å¯ä»¥è‡ªåŠ¨å¤±æ•ˆã€‚

é‚£Â GuardÂ çš„èº«ä»½ï¼Œè°å¯ä»¥å»é™¤æ‰å‘¢ï¼Ÿåªæœ‰Â GuardÂ è‡ªå·±ä»¥åŠæ—¶é—´ï¼ˆåˆ°æœŸï¼‰å¯ä»¥ã€‚



![Untitled (2).png](https://img.learnblockchain.cn/attachments/2023/03/VuJQ0DTR640866e2af28b.png)

### 2.2ã€GuardÂ èƒ½åšä»€ä¹ˆï¼Ÿ

é¦–å…ˆå…·æœ‰äº†å¼ºåˆ¶è½¬ç§»æƒï¼Œå¯¹äºè®¾ç½®äº†Â GuardÂ çš„Â NFTÂ è€Œè¨€ï¼Œåœ¨è¿›è¡ŒtransferFromçš„æ—¶å€™ï¼Œä¼šæŸ¥è¯¢äº¤æ˜“å‘èµ·æ–¹æ˜¯å¦æ˜¯å®ˆå«åœ°å€ï¼Œæ˜¯æ‰èƒ½è½¬ç§»ã€‚


![Untitled (3).png](https://img.learnblockchain.cn/attachments/2023/03/7t0ZcRPx640866d0dc455.png)

Â ğŸ’¡ è¯·ç‰¹åˆ«æ³¨æ„Â 1Â ï¼š

å¯¹äºè®¾ç½®äº†Â GuardÂ çš„Â NFTÂ è€Œè€Œè¨€ï¼ŒåŸæŒæœ‰è€…å°†åªæœ‰æŒæœ‰æƒï¼Œå¹¶æ²¡æœ‰è½¬ç§»æƒï¼ˆå³ä½¿ç”¨æƒï¼‰ï¼Œå…¶ä»–Â DappÂ ä¾æ—§å¯ä»¥æŸ¥è¯¢åˆ°æ­¤Â NFTÂ çš„æ‰€æœ‰è€…æ˜¯åŸç”¨æˆ·ï¼Œä½†åŸç”¨æˆ·æ— æ³•é©±åŠ¨å…¶è¿›è¡Œè½¬ç§»ã€‚

æ‰€ä»¥å¯¹äºè®¾ç½®äº†å®ˆå«çš„Â NFTï¼Œåœ¨Â openseaã€x2y2ç­‰äº¤æ˜“å¹³å°ä¸Šçš„ç­¾åæ˜¯æœ‰æ•ˆçš„ï¼ˆä½†æ˜¯æ— æ³•è¿›è¡Œå®é™…è½¬ç§»ï¼Œå› ä¸ºÂ SeaportÂ ç­‰åè®®æ‰§è¡Œè½¬ç§»çš„æ—¶å€™ï¼Œæ˜¯ç”±Â SeaportÂ åè®®é€šè¿‡ä»£æ‰£æˆæƒæ¥æ‰§è¡Œï¼‰

å¯¹äºäº¤æ˜“å¸‚åœºçš„è¿ä½œæœºåˆ¶å¯æ‹“å±•é˜…è¯»ï¼š




* [X2Y2åä¸‡Â NFTÂ è®¢å•ï¼Œåˆ†æç‰ˆç¨å¯ä»¥ä¸æ”¶åå¤šå°‘ç”¨æˆ·çœŸè¿™ä¹ˆåšäº†ï¼Ÿ](http://mp.weixin.qq.com/s?\__biz=MzIyMTQ5MTg5Mw==\&mid=2247483957\&idx=1\&sn=ab8e4bfe0068fc19dccbb8b00d358541\&chksm=e83aa5efdf4d2cf9263463ea18b4090a25843e0ad84a85bc5594c316045b4d884e526317cf9a\&scene=21#wechat_redirect)

* [ä¸€æ–‡è®²æ¸…-NFTÂ å¸‚åœºæ–°ç§€Â SudoSwapÂ çš„Â AMMÂ æœºåˆ¶-åˆ›æ–°æŒ‘æˆ˜ä¸å±€é™](http://mp.weixin.qq.com/s?\__biz=MzIyMTQ5MTg5Mw==\&mid=2247483943\&idx=1\&sn=fe2caeb811f3aa5adfe9dc5a3a6d3367\&chksm=e83aa5fddf4d2ceb6dd5c978aa209fd36f4ac2917718aaa094016292f9ec038b2c733547936b\&scene=21#wechat_redirect)

* [ã€åˆçº¦è§£è¯»ã€‘CryptoPunk ä¸–ç•Œä¸Šæœ€æ—©çš„å»ä¸­å¿ƒåŒ–Â NFTÂ äº¤æ˜“å¸‚åœº](http://mp.weixin.qq.com/s?\__biz=MzIyMTQ5MTg5Mw==\&mid=2247483924\&idx=1\&sn=30a642fa1acec069e31b40937e2d7de4\&chksm=e83aa5cedf4d2cd861d3cf09c555720d7e6b89febb909ee88853d88f86ca913d3a1d701c1c00\&scene=21#wechat_redirect)

  




ğŸ’¡ è¯·ç‰¹åˆ«æ³¨æ„Â 2Â ï¼š

å¦‚æœå®ˆå«ç›´æ¥è¿›è¡Œäº†è½¬ç§»è¯¥Â NFTï¼Œå¦‚æœæ˜¯ä½¿ç”¨åŸç”Ÿçš„transferFromæˆ–è€…Â safeTransferFromÂ æ–¹æ³•ï¼Œ**å…¶å®å®ˆå«çš„è®¾ç½®æ˜¯ä¸ä¼šè‡ªåŠ¨æ¸…é™¤çš„**ï¼Œå½“ç„¶å¦‚æœæ˜¯å®ˆå«å°†Â NFTÂ è½¬ç»™è‡ªå·±è‡ªç„¶æ— å¦¨ï¼Œä½†æ˜¯å¦‚æœè½¬ç»™æŸç”¨æˆ·ï¼Œç„¶åå†å€ŸåŠ©å®ˆå«è€…çš„è®¾ç½®æ˜¯å¯ä»¥å†æ¬¡è¿›è¡Œè½¬ç§»çš„ã€‚

å› æ­¤å¦‚æœåç»­ä½¿ç”¨Â Guardï¼Œåˆ™æ›´å¤šæ˜¯éœ€è¦æ£€éªŒæ˜¯å¦ä½¿ç”¨çš„æ˜¯transferAndRemoveÂ æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¼šåœ¨è½¬ç§»åç›´æ¥æ¸…é™¤å®ˆå«è€…ä¿¡æ¯ã€‚

å¹¶ä¸”ï¼Œå®ˆå«è€…æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§è¾ƒé«˜çš„æ§åˆ¶æƒåŠ›ï¼Œé›·åŒäºæˆ¿å±‹ç§Ÿèµï¼ŒæŠµæŠ¼çš„é‚£ä¸€åˆ»ï¼Œå…¶å®æœ¬è´¨å·²ç»å±äºé“¶è¡Œï¼Œåªæ˜¯åªæœ‰é“¶è¡Œåœ¨æ»¡è¶³æŸäº›ç¤¾ä¼šæ¡æ¬¾çš„æƒ…å†µä¸‹ï¼ˆå¦‚è¿çº¦ï¼‰æ‰ä¼šæ‰§è¡Œæ‹å–ç­‰æ“ä½œï¼Œæ—¢ç„¶æ˜¯æŸç§é‡‘èæŠµæŠ¼å“çš„å±æ€§ï¼Œåˆ™è‡ªç„¶ä¹Ÿå¯ä»¥äºŒæ¬¡è½¬ç§»æ­¤å®ˆå«æƒä½¿ç”¨changeGuardæ–¹æ³•å³å¯ã€‚

å¯¹äºtransferRemoveçš„è®¾è®¡åŸåˆ™æ˜¯ä¸ºäº†é€‚åº”ä¸åŒåœºæ™¯ã€‚

æ¯”å¦‚é˜²ç›—ä¸­ï¼Œå¦‚æœÂ NFTÂ åœ¨çƒ­é’±åŒ…ï¼Œè€Œçƒ­é’±åŒ…è¢«ç›—äº†ï¼Œå†·é’±åŒ…ä¾ç„¶å®‰å…¨ï¼Œå…¶å®åªè¦transferFromåˆ°å…¶ä»–å®‰å…¨åœ°å€å°±å¥½äº†ã€‚

æˆ–è€…ç§Ÿèµçš„æ—¶å€™ï¼ŒguardÂ è°ƒç”¨transferFromè½¬åˆ°æ–°çš„ç§Ÿèµåœ°å€ï¼Œå°±å®ç°äº†ç§Ÿèµã€‚

è¿˜æœ‰Â SBTÂ çš„ç¤¾äº¤æ¢å¤ï¼Œå°†Â SBTÂ è½¬ç§»åˆ°æ–°åœ°å€ï¼Œä¾ç„¶ä¸å½±å“Â SBTÂ çš„ä¸å¯è½¬ç§»ç‰¹æ€§

### 2.3ã€GuardÂ ä¸èƒ½åšä»€ä¹ˆï¼Ÿ

ä»æºç å¯ä»¥çœ‹åˆ°Â GuardÂ ç›¸å…³çš„åªæœ‰åœ¨æˆäºˆæ—¶ï¼Œæ˜¯æŒæœ‰è€…å’ŒÂ ApproveÂ æˆæƒè€…å¯ä»¥è®¾ç½®ï¼Œä½†Â GuardÂ æ˜¯ä¸èƒ½è®¾ç½®ä»£æ‰£çš„ã€‚

ä¸€æ–¹é¢æ˜¯å‡ºäºå·²ç»ä¸éœ€è¦è€ƒè™‘ä»£æ‰£æˆæƒè€…äº†ï¼Œå› ä¸ºæœ¬è´¨ä¸Šè¯¥Â NFTÂ çš„è½¬ç§»æƒè¢«é™åˆ¶åˆ°äº†Â GuardÂ ä¸Šï¼Œå¦ä¸€æ–¹é¢æ˜¯Â GuardÂ ä¹Ÿä¸èƒ½è®¾ç½®Approveï¼Œæ˜¯é˜²æ­¢åœ¨å®ˆå«è€…å½’è¿˜äº†è½¬ç§»æƒåï¼Œåè€Œç”¨Â approveÂ è½¬ç§»èµ°äº†Â NFTï¼Œè¿™æ ·è¿èƒŒåŸæœ¬æ„æ„¿ï¼Œç”¨æˆ·åˆéš¾ä»¥å‘ç°çš„åœºæ™¯ã€‚

## 3ã€æ€»ç»“

ç”¨ä¸€å¼ å……æ»¡é‡‘èå±æ€§ï¼Œç¨æœ‰ä¸–ä¿—çš„ç»Ÿè®¡æ¥å‘ˆç°å¦‚ä»Šä»¥å¤ªåŠä¸ŠÂ NFTÂ ç±»å‹çš„èµ„äº§æ¦‚è§ˆæŠŠ

æ¯å¤©Â 30Â å¤šä¸‡ç¬”Â NFTÂ äº¤æ˜“ï¼ŒÂ 20Â ä½™ä¸‡å„ç±»Â NFTÂ åˆçº¦ï¼Œè¿™æ ·çš„æ€»æ•°éƒ½å‘ˆç°å‡ºçš„æ˜¯å›´ç»•èµ„äº§ç¡®æƒå¸¦æ¥çš„é‡‘èå±æ€§ä»·å€¼ã€‚


![Untitled (4).png](https://img.learnblockchain.cn/attachments/2023/03/h3XZsmTr640866c3b6b55.png)

ä½†æ˜¯**ä»»ä½•æ—¶å€™é‡‘èå±æ€§éƒ½éœ€è¦é€æ¸ä¾å½’**ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç”¨Â NFTÂ æ¥ç¡®è®¤ç¤¾äº¤å…³ç³»çš„Â Lensï¼Œå¯ä»¥çœ‹åˆ°ç”¨Â NFTÂ æ¥åšæ¸¸æˆèµ„äº§çš„å„ç§Â Gamefiï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°å›´ç»•å†…å®¹åˆ›ä½œå€ŸåŠ©åˆ†æ‹†ä¼—ç­¹çš„Â MirrorÂ ç­‰ï¼Œ

åœ¨ä»¥å¤ªåŠé—®ä¸–åŒºåŒºÂ 8Â å¹´å¤šçš„æ—¶é—´æ¥ï¼Œå›´ç»•Â EIPÂ çš„ææ¡ˆæ€»æ•°å·²ç»è¾¾åˆ°Â 6500+ ï¼Œ

å¯¹æ¯”äºåŒæ ·é‡ç£…çš„Â 4907Â è€Œè¨€ï¼Œ**6147Â æ›´å¤šæ˜¯å¼ºåœ¨å…¼å®¹æ€§çš„ä¼˜åŒ–**

æ¯”å¦‚Â 4907Â åšç§Ÿèµï¼ŒuserÂ è¿™ä¸ªè§’è‰²éœ€è¦é¡¹ç›®çš„ä¸»åŠ¨è®¤å¯ï¼Œå¦‚æœä¸€ä¸ªæ¸¸æˆæ²¡è€ƒè™‘Â userÂ è¿™ä¸ªè§’è‰²ï¼Œåªè€ƒè™‘Â ownerï¼ŒÂ 4907Â æ˜¯ä¸é€‚ç”¨çš„ã€‚è€ŒÂ 6147Â åªè¦è®¤å¯Â ownerÂ å°±å¤Ÿäº†ï¼Œå¹¶ä¸ç”¨åœ¨æ„æ¸¸æˆé¡¹ç›®å’ŒÂ NFTÂ æœ¬èº«æ˜¯å¦æ”¯æŒç§Ÿèµï¼Œç°åœ¨å¤§éƒ¨åˆ†åº”ç”¨åè®®ä»ç„¶æ˜¯åªè®¤Â ownerÂ çš„ï¼Œè¿™ä¹Ÿæ˜¯Â 4907Â é—®ä¸–åï¼Œè¿˜æ— æ³•å¤§å¹…åº¦æ”¹å˜ç°çŠ¶çš„åŸå› ï¼Œåªæœ‰å…ˆé€‚åº”æ—¶ä»£æ½®æµä¹‹ä¸­èƒ½é€æ¸å‘å…‰å‘çƒ­ã€‚

å¦å¤–Â 6147Â ä¹Ÿæå‡ºäº†**â€œå¯ç®¡ç†çš„Â SBTâ€å’Œâ€œæœ‰æ•ˆçš„Â SBTâ€æ¦‚å¿µ**ï¼Œç°åœ¨çš„Â SBTÂ ææ¡ˆè®¾è®¡å¤ªæ³¨é‡Â VitalikÂ æå‡ºçš„â€œä¸å¯è½¬ç§»â€ç‰¹æ€§äº†ï¼Œä½†æ˜¯å´å¿½ç•¥Â NFTÂ çš„æ½œåœ¨ç®¡ç†åœºæ™¯ï¼Œæ¯”å¦‚ç¤¾äº¤æ¢å¤ã€æ”¶å›Â SBTï¼ˆæ¯”å¦‚å­¦æœ¯ä¸ç«¯ï¼Œéœ€è¦æ”¶å›å­¦ä½ï¼Œæˆ–è€…ä¸€ä¸ªÂ DAOÂ æˆå‘˜åœ¨ç¤¾åŒºä½œæ¶ï¼Œéœ€è¦æ”¶å›å®ƒçš„Â SBTÂ æƒé™ï¼‰



> *å‚è€ƒé“¾æ¥ï¼š*
> 
> *https\://github.com/ethereum/EIPs/blob/master/EIPS/eip-6147.md*
> 
> *https\://ethereum-magicians.org/t/final-eip-6147-guard-of-nft-sbt-an-extension-of-erc-721/12052Â *




æ¬¢è¿ä½ ä»å…¬ä¼—å·åå°ç•™è¨€ä½œè€…ï¼Œæ¢è®¨web3è¡Œä¸šé—®é¢˜

ç‚¹èµå…³æ³¨åå››ï¼Œç”¨æŠ€æœ¯è§†è§’å¸¦ç»™ä½ ä»·å€¼

<!--EndFragment-->
